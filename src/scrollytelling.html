<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" type="text/css" href="css/style.css" />
    <title>Master's Project</title>

    <!-- Microdata Scema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "NewsArticle",
      "headline": "",
      "image": [
        "",
        ""
      ],
      "author": "",
      "publisher": "",
      "datePublished": "2020-04-28T12:00:00",
      "url": "",
      "sameAs" : [ 
        "",
        "",
        ""
      ]
    }
    </script>

    <!-- Twitter Summary Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="">
    <meta name="twitter:site" content="@">
    <meta name="twitter:url" content="">
    <meta name="twitter:image" content="g">
    <meta name="twitter:image:alt" content="">
    <meta name="twitter:description" content="">

    <!-- Social Sharing Meta (Facebook, others) -->
    <meta property="og:type" content="profile">
    <meta property="og:profile:first_name" content="">
    <meta property="og:profile:last_name" content="">
    <meta property="og:profile:user_name" content="@">
    <meta property="og:title" content="">
    <meta property="og:url" content="">
    <meta property="og:image" content="">
    <meta property="og:description" content="">


  </head>
  <body>


    <!-- main banner -->
    <header role="banner" class="looping-background-video d-flex flex-column align-items-center justify-content-center">

      <h1 class="text-white text-center display-1">Hello World</h1>
      <p class="text-white">Something something</p>
      <p class="text-white small pt-5">By Name Here</p>

      <video muted playsinline autoplay loop>
        <source src="https://temp-j100.s3.amazonaws.com/aidindying-background.mp4" type="video/mp4">
        <img src="" alt="fallback">
      </video>

    </header>



    <!-- content section -->
    <article role="main">

      <div class="container mt-5">

        <!-- article header -->
        <header class="my-5 row justify-content-center">
          <div class="col-12 col-md-10 text-center">
            <h2>Governments have widely varying policies</h2>
          </div>
        </header>




        <!-- Sticky Graphic Scrolling Section -->
        <div class="row pt-10">


          <!-- Text "steps" which activate graphic -->
          <div class="col-12 col-md-4 order-md-1 order-2">

            <div class="step" data-sticky-show="map-1">
              <p class="lead">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
              tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
              quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
              consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
              cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
              proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
            </div>

            <div class="step mt-10" data-sticky-show="map-2">
              <p class="lead">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
              tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
              quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
              consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
              cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
              proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
            </div>

            <div class="step mt-10" data-sticky-show="map-3">
              <p class="lead">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
              tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
              quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
              consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
              cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
              proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
            </div>

          </div>

          <!-- Sticky graphics -->
          <div class="col-12 col-md-8 position-relative order-md-2 order-1">

            <figure class="figure position-sticky w-100" data-sticky-graphic="map-1">
              <img src="assets/us-hex-map-1.svg" alt="Map showing states that ..." class="img-fluid d-block">
              <figcaption class="figure-caption">Map showing states that...</figcaption>
            </figure>

            <figure class="figure d-none position-sticky w-100" data-sticky-graphic="map-2">
              <img src="assets/us-hex-map-2.svg" alt="Map showing states that ..." class="img-fluid d-block">
              <figcaption class="figure-caption">Map showing states that...</figcaption>
            </figure>

            <figure class="figure d-none position-sticky w-100" data-sticky-graphic="map-3">
              <img src="assets/us-hex-map-3.svg" alt="Map showing states that ..." class="img-fluid d-block">
              <figcaption class="figure-caption">Map showing states that...</figcaption>
            </figure>

          </div>

        </div><!-- end row -->


        <div class="row mt-10">

          <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
          tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
          quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
          consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
          cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
          proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>

        </div>
       

      </div><!-- close container -->
    </article>


    <div class="container-fluid">
      <footer role="contentinfo" class="row justify-content-center mt-5 bg-dark text-light text-center">
        <header class="col-8 py-5">
          <p>This is a project by a student at the UC Berkeley Graduate School of Journalism</p>
        </header>
      </footer>
    </div>



    <!-- Scripts. Remove those not needed -->
    <script type="text/javascript" src="js/jquery-3.4.1.min.js"></script>
    <script type="text/javascript" src="js/bootstrap-4.3.1.bundle.min.js"></script>
    <script type="text/javascript" src="js/d3-5.9.7.min.js"></script>
    <script type="text/javascript" src="js/stickyfill.min.js"></script>
    <script type="text/javascript" src="js/intersection-observer.js"></script>
    <script type="text/javascript" src="js/scrollama.js"></script>
    <script>
      jQuery(document).ready(function($){

        //polyfill for position:sticky, for ie 9+ browsers
        //https://github.com/wilddeer/stickyfill
        var stickyElements = $('.sticky');
        Stickyfill.add(stickyElements);


        // instantiate the scrollama
        const scroller = scrollama();

        // setup the instance, pass callback functions
        scroller
          .setup({
            step: ".step"
          })
          .onStepEnter(response => {


            // { element, index, direction }

            //Hide all maps initially
            // $(response.element)
            //   .parents('.row')
            //   .find('[data-sticky-graphic]')
            //   .addClass('d-none');

            //save the name of the current element from data-stick-show attribute
            let currentElement = $(response.element).data('sticky-show');

            $('[data-sticky-graphic]').each(function(idx, elm){
              if($(elm).data('sticky-graphic') !== currentElement){
                $(elm).addClass("d-none");
              } else {
                $(elm).removeClass("d-none");
              }
            })

            // $('[data-sticky-graphic="' + currentElement + '"]')
            //   .removeClass('invisible');


            
          })
          .onStepExit(response => {

           // console.log(response.element, response.index, response.direction)
            // { element, index, direction }

          //   let currentElement = $(response.element).data('sticky-show');

          //   $('[data-sticky-graphic]').each(function(idx, elm){
          //     if($(elm).data('sticky-graphic') !== currentElement){
          //       $(elm).addClass("d-none");
          //     } else {
          //       $(elm).removeClass("d-none");
          //     }
          //   })
          });

        // setup resize event
        window.addEventListener("resize", scroller.resize);


      });
    </script>
  </body>
</html>